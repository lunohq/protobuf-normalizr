!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports["protobuf-normalizr"]=e():n["protobuf-normalizr"]=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var u=t[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,e),u.loaded=!0,u.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(n){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return n&&n.hasOwnProperty("id")&&null!==n.id||null!==e?!0:!1},r=function(n){return n.$type.name.toLowerCase()},u=function(n){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return e?e:n.get("id")},o=function(n,e,o,a){var i=arguments.length<=4||void 0===arguments[4]?null:arguments[4],s=e.get(n.name);if(n.repeated||t(s,i)){var f=r(e),m=u(e,i);a[f]||(a[f]={}),a[f][m]||(a[f][m]={});var p=a[f][m];n.repeated&&null!==s?(p[n.name]||(p[n.name]=[]),s.map(function(e){p[n.name].push(e.id),l(e,o,a)}),e.set(n.name,null)):null!==s&&t(s)&&(p[n.name]=s.id,l(s,o,a),e.set(n.name,null))}},a=function(n,e,t){var r=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return n.$type._fields.map(function(u){o(u,n,e,t,r)}),n},i=function(n,e,t){var r=n.map(function(n){return l(n,e,t)});return r},s=function(n,e,t){var o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],i=r(n),s=u(n,o);return e[i]||(e[i]={}),e[i][s]=n,a(n,e,t,o),s},l=function(n,e,r){var u=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return n.$type&&t(n,u)?s(n,e,r,u):n.$type?a(n,e,r):n instanceof Array?i(n,e,r):n},f=function(n,e,t,r){if(r.normalizations[e]){var u=n.$type._fieldsByName,o=r.normalizations[e][t],a=function(e){var t=o[e],a=u[e].resolvedType.name.toLowerCase();t instanceof Array?(n.set(e,[]),t.map(function(t){n[e].push(r.protobufs[a][t])})):n.set(e,r.protobufs[a][t])};for(var i in o)a(i)}},m=function(n){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],t={},r={},u=l(n,t,r,e);return{protobufs:t,normalizations:r,result:u}};e.normalize=m;var p=function(n,e,t){var u=r(e);if(t.protobufs[u]){var o=t.protobufs[u][n];return f(o,u,n,t),o}};e.denormalize=p,e["default"]=m}])});